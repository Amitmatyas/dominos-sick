<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>שליחת מתנה לחולה - דומינוס</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@900&display=swap" rel="stylesheet">
    <link rel="icon" href="https://iili.io/38lEvv2.png" type="image/png">
    <style>
        body {
            font-family: Arial, sans-serif; /* גופן ברירת מחדל, Heebo ישמש לכותרות */
            display: flex;
            justify-content: center;
            align-items: flex-start; /* יישור למעלה ולא למרכז כל המסך */
            min-height: 100vh;
            background-color: #f0f0f0; /* צבע רקע כללי */
            margin: 0;
            padding: 40px 20px; /* ריווח עליון ותחתון, וקצת בצדדים */
            direction: rtl; /* כיוון טקסט מימין לשמאל */
            text-align: right; /* יישור טקסט לימין */
            box-sizing: border-box; /* ודא שהריפוד כלול בגודל */
        }

        .container {
            background-color: #ffffff; /* רקע לבן לתוכן העמוד */
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* צל עדין */
            max-width: 600px; /* רוחב מקסימלי לתוכן */
            width: 100%; /* ודא שהקונטיינר תופס את כל הרוחב הפנוי עד max-width */
            text-align: center; /* מרכוז כללי של התוכן בתוך הקונטיינר */
        }

        .logo-image {
            display: block; /* כדי לאפשר מרכוז עם margin: auto */
            width: 80px; /* גודל הלוגו */
            height: 80px; /* גודל הלוגו */
            margin: 0 auto 20px auto; /* מרכוז והוספת רווח תחתון */
            object-fit: contain; /* ודא שהתמונה כולה גלויה ללא חיתוך */
        }

        /* סטיילינג לכותרת הראשית */
        .maintext {
            font-family: 'Heebo', sans-serif; /* שימוש בגופן Heebo */
            font-weight: 900; /* משקל Black עבור Heebo */
            font-size: 1.8em; /* הגדלת גודל הגופן */
            color: #016491; /* צבע טקסט כחול */
            margin-bottom: 10px; /* רווח קטן מתחת לכותרת הראשית */
            margin-top: 0; /* ודא שאין מרווח עליון כברירת מחדל */
            text-align: center; /* מרכז את הטקסט */
        }

        /* סטיילינג לכותרת המשנה */
        .subtext {
            font-family: Arial, sans-serif; /* או Heebo, תלוי בהעדפה */
            font-weight: normal; /* משקל רגיל */
            font-size: 1.1em; /* גודל מעט קטן יותר מהכותרת הראשית */
            color: #333; /* צבע אפור כהה לניגודיות */
            margin-bottom: 25px; /* רווח תחתון לפני האופציות */
            margin-top: 0; /* ודא שאין מרווח עליון כברירת מחדל */
            text-align: center; /* מרכז את הטקסט */
        }

        .options-list {
            margin-bottom: 25px;
            border-top: 1px solid #eee; /* קו מפריד עליון */
            padding-top: 15px;
            text-align: right; /* יישור הטקסט ברשימה לימין */
        }

        .option {
            display: block; /* כל אופציה בשורה נפרדת */
            background-color: #e0e0e0; /* רקע אפור בהיר לאופציה */
            color: #016491; /* צבע טקסט לאופציה */
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            cursor: pointer; /* סמן עכבר לחיץ */
            transition: background-color 0.2s ease, border-color 0.2s ease;
            border: 2px solid transparent; /* גבול שקוף שישמש לבחירה */
        }

        .option:last-child {
            margin-bottom: 0; /* הסרת מרווח תחתון מהאחרון */
        }

        .option input[type="radio"] {
            display: none; /* הסתרת כפתור הרדיו המובנה */
        }

        /* עיצוב האופציה הנבחרת */
        .option input[type="radio"]:checked + .option-content {
            font-weight: bold;
        }

        /* שינוי רקע האופציה בעת ריחוף ועבור הנבחרת */
        .option:hover,
        .option input[type="radio"]:checked {
            background-color: #d5d5d5; /* צבע רקע מעט כהה יותר בריחוף או בחירה */
        }

        .option-content {
            display: flex; /* שימוש בפלקסבוקס לסידור הטקסט והמחיר */
            justify-content: space-between; /* פיזור הטקסט והמחיר לקצוות */
            align-items: center; /* יישור פריטים במרכז אנכית */
            width: 100%; /* ודא שהתוכן תופס את כל הרוחב */
        }

        .option-text {
            /* font-weight: bold; - עובר לבחירה */
        }

        .option-price {
            color: #e31837; /* צבע אדום למחיר */
            font-weight: bold;
            margin-right: 15px; /* רווח בין הטקסט למחיר */
            flex-shrink: 0; /* מונע מהמחיר להתכווץ */
        }

        .cart-section {
            margin-top: 30px;
            border-top: 1px solid #eee;
            padding-top: 20px;
            text-align: right; /* יישור טקסט בכותרת הסל */
        }

        .cart-section h3 {
            font-family: 'Heebo', sans-serif; /* שימוש בגופן Heebo לכותרת הסל */
            font-weight: 900; /* משקל Black */
            color: #016491;
            margin-top: 0;
            margin-bottom: 15px;
            text-align: center; /* מרכז את הכותרת */
        }

        #cart-items {
            list-style: none; /* הסרת נקודות מרשימה */
            padding: 0;
            margin: 0;
            background-color: #f9f9f9; /* רקע בהיר לרשימת הסל */
            border-radius: 5px;
            padding: 10px;
        }

        #cart-items li {
            background-color: #ffffff; /* רקע לבן לפריט בסל */
            border: 1px solid #eee;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 4px;
            display: flex;
            justify-content: space-between; /* פיזור הפריטים לקצוות */
            align-items: center;
            color: #016491;
            font-size: 0.95em;
            flex-wrap: wrap; /* Allow items to wrap on smaller screens */
        }

        #cart-items li:last-child {
            margin-bottom: 0;
        }

        /* Updated layout for cart items */
        #cart-items li .remove-btn { /* Specificity for remove button inside li */
            order: 1; /* Display first (on the right in RTL flex) */
            margin-left: 10px; /* Space after remove button in RTL */
        }

        #cart-items li .item-name {
            order: 2; /* Display after remove button */
            font-weight: bold;
            flex-grow: 1; /* Take available space in the middle */
             margin-left: 10px; /* Space after item name in RTL */
        }

         #cart-items li .item-price-total {
            order: 3; /* Display after item name */
             color: #e31837; /* Red for total item price */
             font-weight: bold;
             margin-left: 10px; /* Space after price before controls in RTL */
             flex-shrink: 0; /* Prevent shrinking */
         }


        #cart-items li .item-controls {
            order: 4; /* Display last (on the left in RTL flex) */
            display: flex;
            align-items: center;
            flex-shrink: 0; /* Prevent shrinking */
        }

        .item-quantity {
            margin: 0 5px; /* Space around the quantity number */
            font-weight: bold;
        }

        .quantity-btn, .remove-btn {
            background-color: #016491;
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            font-size: 1em;
            width: 25px; /* Fixed width for buttons */
            height: 25px; /* Fixed height for buttons */
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.2s ease;
            padding: 0; /* Remove default padding */
            line-height: 1; /* Improve vertical centering of text/icon */
        }

        .quantity-btn:hover:not(:disabled), .remove-btn:hover:not(:disabled) {
             background-color: #004f7a; /* Darker blue on hover */
        }

         .quantity-btn:disabled {
             opacity: 0.5;
             cursor: not-allowed;
         }


        .remove-btn {
            background-color: #e31837; /* Red for remove button */
        }

        .remove-btn:hover:not(:disabled) {
            background-color: #c21531; /* Darker red on hover */
        }


        #cart-total {
            text-align: center;
            font-size: 1.1em;
            font-weight: bold;
            color: #016491;
            margin-top: 15px;
        }

        /* Styling for the email input section */
        .email-section {
            margin-top: 20px;
            margin-bottom: 20px;
            padding-top: 15px;
            border-top: 1px solid #eee;
            text-align: right;
        }

        .email-section label {
            display: block; /* Label on its own line */
            font-weight: bold;
            color: #016491;
            margin-bottom: 8px;
            text-align: center; /* Center the label */
        }

        .email-section input[type="email"] {
            width: calc(100% - 22px); /* Full width minus padding and border */
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 1em;
            box-sizing: border-box; /* Include padding and border in the element's total width and height */
            text-align: right; /* Align text to the right */
            display: block; /* Make it a block element to take full width */
            margin: 0 auto; /* Center the input field */
        }

        .email-section input[type="email"]:focus {
            outline: none;
            border-color: #016491; /* Highlight on focus */
            box-shadow: 0 0 5px rgba(1, 100, 145, 0.3);
        }


        .buttons-container {
            display: flex;
            justify-content: center; /* מרכז את הכפתורים */
            gap: 15px; /* רווח בין כפתורים */
            flex-wrap: wrap; /* ירידת שורה בכפתורים במסכים קטנים */
            margin-top: 25px; /* רווח מעל הכפתורים */
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s ease, opacity 0.3s ease;
            min-width: 120px; /* רוחב מינימלי לכפתור */
            text-align: center;
            text-decoration: none;
            display: inline-block;
        }

        .btn:hover:not(:disabled) { /* הוסף :not(:disabled) כדי לא להגיב בריחוף אם הכפתור מנוטרל */
            opacity: 0.9;
        }

        .btn:disabled { /* עיצוב כפתור מנוטרל */
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-add-to-cart {
            background-color: #ffffff; /* רקע לבן */
            color: #016491; /* טקסט כחול */
            border: 1px solid #016491; /* גבול כחול */
        }

        .btn-pay {
            background-color: #016491; /* רקע כחול */
            color: #ffffff; /* טקסט לבן */
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>

    <div class="container">
        <img class="logo-image" src="https://iili.io/38lEvv2.png" alt="Logo">

        <p class="maintext">מישהו חולה?</p>
        <p class="subtext">הביאו לו מתנה קטנה ורגשו אותו</p>

        <div class="options-list">
            <label class="option" data-name="30% הנחה" data-price="34.90">
                <input type="radio" name="gift-option" value="option1">
                <span class="option-content">
                    <span class="option-text">1. 30% הנחה</span> <span class="option-price">34.90 ש״ח</span>
                </span>
            </label>
            <label class="option" data-name="פיצה חינם" data-price="72.90">
                <input type="radio" name="gift-option" value="option2">
                <span class="option-content">
                    <span class="option-text">2. פיצה חינם</span> <span class="option-price">72.90 ש״ח</span>
                </span>
            </label>
            <label class="option" data-name="ארוחה (פיצה+נלווה+שתייה)" data-price="144.90">
                <input type="radio" name="gift-option" value="option3">
                <span class="option-content">
                    <span class="option-text">3. ארוחה (פיצה+נלווה+שתייה)</span> <span class="option-price">144.90 ש״ח</span>
                </span>
            </label>
        </div>

        <div class="buttons-container">
            <button class="btn btn-add-to-cart" id="addToCartButton">הוספה לסל</button>
        </div>

        <div id="cart-section" class="cart-section hidden">
            <h3>סל הקניות:</h3>
            <ul id="cart-items">
                </ul>

            <div class="email-section">
                <label for="recipient-email">כתובת דוא״ל לשליחת המתנה:</label>
                <input type="email" id="recipient-email" placeholder="הכנס כתובת דוא״ל" required>
            </div>
             <p id="cart-total">סה״כ: 0.00 ש״ח</p>
            <div class="buttons-container">
                <button class="btn btn-pay" id="payButton" disabled>תשלום</button>
            </div>
        </div>
    </div>

    <script>
        const optionsList = document.querySelector('.options-list');
        const addToCartButton = document.getElementById('addToCartButton');
        const cartSection = document.getElementById('cart-section');
        const cartItemsList = document.getElementById('cart-items');
        const cartTotalParagraph = document.getElementById('cart-total');
        const payButton = document.getElementById('payButton');
        const recipientEmailInput = document.getElementById('recipient-email'); // Get the email input

        let cart = []; // מערך לייצוג סל הקניות. כל פריט מכיל שם, מחיר, וכמות.

        // פונקציה לעדכון תצוגת סל הקניות
        function updateCartDisplay() {
            cartItemsList.innerHTML = ''; // ניקוי הרשימה הנוכחית
            let total = 0;

            if (cart.length === 0) {
                cartSection.classList.add('hidden'); // הסתרת הסל אם הוא ריק
                payButton.disabled = true; // נטרול כפתור תשלום אם הסל ריק
                cartTotalParagraph.textContent = 'סה״כ: 0.00 ש״ח'; // איפוס סכום כולל
                recipientEmailInput.required = false; // Email not required if cart is empty
                return; // יציאה מהפונקציה אם אין פריטים
            }

            // הצגת הסל אם יש פריטים
            cartSection.classList.remove('hidden');
            payButton.disabled = false; // הפעלת כפתור תשלום
            recipientEmailInput.required = true; // Email is required if cart has items


            // יצירת רשימת פריטים מעודכנת
            cart.forEach((item, index) => { // Added index for easy identification
                const listItem = document.createElement('li');
                 // Use data-name and data-index to identify item for quantity/remove actions
                 // The order in the HTML dictates the order in the flex container (RTL)
                listItem.innerHTML = `
                    <button class="remove-btn" data-index="${index}">X</button>
                    <span class="item-name">${item.name}</span>
                    <span class="item-price-total">${(item.price * item.quantity).toFixed(2)} ש״ח</span>
                    <span class="item-controls">
                        <button class="quantity-btn decrease-quantity" data-index="${index}" ${item.quantity === 1 ? 'disabled' : ''}>-</button>
                        <span class="item-quantity">${item.quantity}</span>
                        <button class="quantity-btn increase-quantity" data-index="${index}">+</button>
                    </span>
                `;
                cartItemsList.appendChild(listItem);
                total += item.price * item.quantity;
            });

            // עדכון הסכום הכולל
            cartTotalParagraph.textContent = `סה״כ: ${total.toFixed(2)} ש״ח`;
        }

        // Event delegation for cart item controls (quantity and remove)
        cartItemsList.addEventListener('click', (event) => {
            const target = event.target;

            // Handle Quantity Increase
            if (target.classList.contains('increase-quantity')) {
                const index = target.dataset.index;
                if (cart[index]) {
                    cart[index].quantity++;
                    updateCartDisplay();
                }
            }

            // Handle Quantity Decrease
            if (target.classList.contains('decrease-quantity')) {
                const index = target.dataset.index;
                 if (cart[index] && cart[index].quantity > 1) {
                    cart[index].quantity--;
                    updateCartDisplay();
                 }
            }

            // Handle Remove Item
            if (target.classList.contains('remove-btn')) {
                 const index = target.dataset.index;
                 // Use confirm to ask user before removing
                 if (confirm(`האם אתה בטוח שברצונך להסיר את "${cart[index].name}" מהסל?`)) {
                     cart.splice(index, 1); // Remove item from array
                     updateCartDisplay(); // Update display
                 }
            }
        });


        // אירוע לחיצה על כפתור "הוספה לסל"
        addToCartButton.addEventListener('click', () => {
            const radioButtons = document.querySelectorAll('input[name="gift-option"]');
            let selectedOption = null;

            radioButtons.forEach(radio => {
                if (radio.checked) {
                    selectedOption = radio;
                }
            });

            if (selectedOption) {
                const optionLabel = selectedOption.closest('.option');
                const itemName = optionLabel.dataset.name;
                const itemPrice = parseFloat(optionLabel.dataset.price);

                // Check if the item is already in the cart by name
                const existingItem = cart.find(item => item.name === itemName);

                if (existingItem) {
                    // If exists, just increase the quantity
                    existingItem.quantity++;
                    // No alert here as requested
                } else {
                    // If not exists, add as a new item with quantity 1
                    cart.push({ name: itemName, price: itemPrice, quantity: 1 });
                    // No alert here as requested
                }

                // Update cart display
                updateCartDisplay();

                // Optional: Uncheck the radio button after adding
                // selectedOption.checked = false;

            } else {
                alert('אנא בחר אופציה לפני ההוספה לסל.');
            }
        });

        // אירוע לחיצה על כפתור "תשלום"
        payButton.addEventListener('click', () => {
            // Check if email is entered and valid (basic check with 'required' in HTML) and cart is not empty
            if (cart.length > 0 && recipientEmailInput.checkValidity()) {
                 const email = recipientEmailInput.value;
                 // Here you would typically send the cart data and email to a server
                 console.log("Initiating payment for cart:", cart);
                 console.log("Recipient Email:", email);

                alert("לא ניתן לשלם, אנא נסו שנית מאוחר יותר"); // Keep the placeholder alert for now
                 // In a real application, this would initiate a payment process
            } else if (cart.length === 0) {
                 alert('סל הקניות ריק.');
             } else {
                 // This part should ideally be handled by HTML5 form validation if input is in a form
                 alert('אנא הזן כתובת דוא״ל חוקית לשליחת המתנה.');
             }
        });

        // קריאה ראשונית לעדכון תצוגת הסל (כדי להציג "סה"כ: 0.00 ש"ח" ולנטרל כפתור תשלום)
        updateCartDisplay();

    </script>

</body>
</html>
